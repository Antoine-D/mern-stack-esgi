{"ast":null,"code":"import _classCallCheck from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import axios from'axios';import Nav from\"./Navbar/nav\";import E403 from\"./errors/E403\";var config=require(\"../env\").config;var uri=require(\"../env\").api_uri;var EditUser=/*#__PURE__*/function(_Component){_inherits(EditUser,_Component);var _super=_createSuper(EditUser);function EditUser(props){var _this;_classCallCheck(this,EditUser);_this=_super.call(this,props);_this.onChangeUserName=_this.onChangeUserName.bind(_assertThisInitialized(_this));_this.onChangeUserLastname=_this.onChangeUserLastname.bind(_assertThisInitialized(_this));_this.onchangeUserBirthdate=_this.onchangeUserBirthdate.bind(_assertThisInitialized(_this));_this.onchangeUserActivate=_this.onchangeUserActivate.bind(_assertThisInitialized(_this));//this.onchangeUserEmail = this.onchangeUserEmail.bind(this);\n_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.state={name:'',lastname:'',birthdate:'',validated_email:'',error:''};return _this;}_createClass(EditUser,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.match.params){axios.get(uri+'/users/'+this.props.match.params.id,config).then(function(response){_this2.setState({name:response.data.name,lastname:response.data.lastname,birthdate:response.data.birthdate,validated_email:response.data.validated_email,email:response.data.email});}).catch(function(error){console.log(error);});}else{this.setState({error:\"Unauthorized\"});}}},{key:\"onChangeUserName\",value:function onChangeUserName(e){this.setState({name:e.target.value});}},{key:\"onChangeUserLastname\",value:function onChangeUserLastname(e){this.setState({lastname:e.target.value});}},{key:\"onchangeUserBirthdate\",value:function onchangeUserBirthdate(e){this.setState({birthdate:e.target.value});}},{key:\"onchangeUserActivate\",value:function onchangeUserActivate(e){if(e.target.value===true){this.setState({validated_email:false});}else{this.setState({validated_email:true});}}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();var obj={name:this.state.name,lastname:this.state.lastname,birthdate:this.state.birthdate,validated_email:this.state.validated_email,email:this.state.email};console.log(obj);axios.post(uri+'/users/update/'+this.props.match.params.id,obj,config).then(function(res){return console.log(res.data);});this.props.history.push('/all');}},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsx(E403,{});}else{console.log(this.state);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"h3\",{align:\"center\",children:\"Update my profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.name,onChange:this.onChangeUserName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lastname: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.lastname,onChange:this.onChangeUserLastname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Birthdate: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",value:this.state.birthdate,onChange:this.onchangeUserBirthdate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",disabled:\"disabled\",className:\"form-control\",value:this.state.email//onChange={this.onchangeUserEmail}\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"activate_acc\",className:\"form-check-input\",value:this.state.validated_email,onChange:this.onchangeUserActivate,checked:this.state.validated_email&&\"checked\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"activate_acc\",style:{'font-size':'1rem'},children:\" Activate \"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",className:\"btn btn-primary\"})})]})]});}}}]);return EditUser;}(Component);export{EditUser as default};","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/EditUser.js"],"names":["React","Component","axios","Nav","E403","config","require","uri","api_uri","EditUser","props","onChangeUserName","bind","onChangeUserLastname","onchangeUserBirthdate","onchangeUserActivate","onSubmit","state","name","lastname","birthdate","validated_email","error","match","params","get","id","then","response","setState","data","email","catch","console","log","e","target","value","preventDefault","obj","post","res","history","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Nav from \"./Navbar/nav\";\nimport E403 from \"./errors/E403\";\n\n\nconst config = require(\"../env\").config;\nconst uri = require(\"../env\").api_uri;\n\nexport default class EditUser extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.onChangeUserName = this.onChangeUserName.bind(this);\n        this.onChangeUserLastname = this.onChangeUserLastname.bind(this);\n        this.onchangeUserBirthdate = this.onchangeUserBirthdate.bind(this);\n        this.onchangeUserActivate = this.onchangeUserActivate.bind(this);\n        //this.onchangeUserEmail = this.onchangeUserEmail.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n\n        this.state = {\n            name: '',\n            lastname: '',\n            birthdate: '',\n            validated_email: '',\n            error: ''\n        }\n    }\n\n    componentDidMount() {\n\n        if ( this.props.match.params ) {\n            axios.get(uri + '/users/' + this.props.match.params.id, config)\n                .then(response => {\n                    this.setState({\n                        name: response.data.name,\n                        lastname: response.data.lastname,\n                        birthdate: response.data.birthdate,\n                        validated_email: response.data.validated_email,\n                        email: response.data.email\n                    })\n                })\n                .catch(function (error) {\n                    console.log( error )\n                })\n        }\n        else{\n            this.setState({error: \"Unauthorized\"});\n        }\n    }\n\n    onChangeUserName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n    onChangeUserLastname(e) {\n        this.setState({\n            lastname: e.target.value\n        });\n    }\n    onchangeUserBirthdate(e) {\n        this.setState({\n            birthdate: e.target.value\n        });\n    }\n    onchangeUserActivate(e) {\n\n        if( e.target.value === true){\n            this.setState({\n                validated_email: false\n            });\n        }\n        else{\n            this.setState({\n                validated_email: true\n            });\n        }\n\n\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        const obj = {\n            name: this.state.name,\n            lastname: this.state.lastname,\n            birthdate: this.state.birthdate,\n            validated_email: this.state.validated_email,\n            email: this.state.email,\n        };\n        console.log( obj );\n        axios.post(uri + '/users/update/'+this.props.match.params.id, obj, config)\n            .then(res => console.log(res.data));\n\n        this.props.history.push('/all');\n    }\n\n    render() {\n        if( this.state.error ){\n\n            return (\n                <E403 />\n\n            );\n        }\n        else {\n            console.log( this.state )\n            return (\n                <div>\n                    <Nav/>\n                    <h3 align=\"center\">Update my profile</h3>\n                    <form onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                            <label>Name: </label>\n                            <input type=\"text\"\n                                   className=\"form-control\"\n                                   value={this.state.name}\n                                   onChange={this.onChangeUserName}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Lastname: </label>\n                            <input\n                                type=\"text\"\n                                className=\"form-control\"\n                                value={this.state.lastname}\n                                onChange={this.onChangeUserLastname}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label>Birthdate: </label>\n                            <input\n                                type=\"date\"\n                                className=\"form-control\"\n                                value={this.state.birthdate}\n                                onChange={this.onchangeUserBirthdate}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input\n                                type=\"email\"\n                                disabled=\"disabled\"\n                                className=\"form-control\"\n                                value={this.state.email}\n                                //onChange={this.onchangeUserEmail}\n                            />\n                        </div>\n\n                        <div className=\"form-check\">\n                            <input\n                                type=\"checkbox\"\n                                id=\"activate_acc\"\n                                className=\"form-check-input\"\n                                value={this.state.validated_email}\n                                onChange={this.onchangeUserActivate}\n                                checked={ this.state.validated_email && \"checked\"}\n                            />\n                            <label className=\"form-check-label\"\n                                   htmlFor=\"activate_acc\"\n                                   style={{ 'font-size': '1rem'}}> Activate </label>\n                        </div>\n\n                        <br/>\n\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Update\" className=\"btn btn-primary\"/>\n                        </div>\n                    </form>\n                </div>\n            )\n        }\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/Profile.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Nav from \"./Navbar/nav\";\nimport E403 from \"./errors/E403\";\n\nconst config = require(\"../env\").config;\n\nconst uri = require(\"../env\").api_uri;\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangeUserName = this.onChangeUserName.bind(this);\n    this.onChangeUserLastname = this.onChangeUserLastname.bind(this);\n    this.onchangeUserBirthdate = this.onchangeUserBirthdate.bind(this); //this.onchangeUserEmail = this.onchangeUserEmail.bind(this);\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      name: '',\n      lastname: '',\n      birthdate: '',\n      success: false,\n      error: ''\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.location.state) {\n      axios.get(uri + '/users/' + this.props.location.state.user_id, config).then(response => {\n        this.setState({\n          name: response.data.name,\n          lastname: response.data.lastname,\n          birthdate: response.data.birthdate,\n          email: response.data.email\n        });\n        this.setState({\n          error: ''\n        });\n      }).catch(function (error) {\n        this.setState({\n          error: error.message\n        });\n      });\n    } else {\n      this.setState({\n        error: \"Unauthorized\"\n      });\n    }\n  }\n\n  onChangeUserName(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  onChangeUserLastname(e) {\n    this.setState({\n      lastname: e.target.value\n    });\n  }\n\n  onchangeUserBirthdate(e) {\n    this.setState({\n      birthdate: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const obj = {\n      name: this.state.name,\n      lastname: this.state.lastname,\n      birthdate: this.state.birthdate,\n      email: this.state.email\n    };\n    axios.post(uri + '/users/update/' + this.props.location.state.user_id, obj, config).then(res => this.setState({\n      success: true\n    }) //console.log(res.data)\n    );\n    this.props.history.push('/all');\n  }\n\n  render() {\n    if (this.state.error) {\n      return /*#__PURE__*/_jsxDEV(E403, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          align: \"center\",\n          children: \"Update my profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.onSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Name: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: this.state.name,\n              onChange: this.onChangeUserName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Lastname: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: this.state.lastname,\n              onChange: this.onChangeUserLastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Birthdate: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"form-control\",\n              value: this.state.birthdate,\n              onChange: this.onchangeUserBirthdate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              disabled: \"disabled\",\n              className: \"form-control\",\n              value: this.state.email //onChange={this.onchangeUserEmail}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Update\",\n              className: \"btn btn-primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/Profile.js"],"names":["React","Component","axios","Nav","E403","config","require","uri","api_uri","Profile","constructor","props","onChangeUserName","bind","onChangeUserLastname","onchangeUserBirthdate","onSubmit","state","name","lastname","birthdate","success","error","componentDidMount","location","get","user_id","then","response","setState","data","email","catch","message","e","target","value","preventDefault","obj","post","res","history","push","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Nav from \"./Navbar/nav\";\nimport E403 from \"./errors/E403\";\n\n\nconst config = require(\"../env\").config;\nconst uri = require(\"../env\").api_uri;\n\nexport default class Profile extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.onChangeUserName = this.onChangeUserName.bind(this);\n        this.onChangeUserLastname = this.onChangeUserLastname.bind(this);\n        this.onchangeUserBirthdate = this.onchangeUserBirthdate.bind(this);\n        //this.onchangeUserEmail = this.onchangeUserEmail.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n\n        this.state = {\n            name: '',\n            lastname: '',\n            birthdate: '',\n            success: false,\n            error: ''\n        }\n    }\n\n    componentDidMount() {\n        if ( this.props.location.state ){\n            axios.get(uri + '/users/'+this.props.location.state.user_id, config)\n                .then(response => {\n                    this.setState({\n                        name: response.data.name,\n                        lastname: response.data.lastname,\n                        birthdate: response.data.birthdate,\n                        email: response.data.email\n                    })\n                    this.setState( { error: '' } );\n                })\n                .catch(function (error) {\n                    this.setState({ error: error.message });\n                })\n        }\n        else{\n            this.setState({ error: \"Unauthorized\" });\n        }\n\n    }\n\n    onChangeUserName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n    onChangeUserLastname(e) {\n        this.setState({\n            lastname: e.target.value\n        });\n    }\n    onchangeUserBirthdate(e) {\n        this.setState({\n            birthdate: e.target.value\n        });\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        const obj = {\n            name: this.state.name,\n            lastname: this.state.lastname,\n            birthdate: this.state.birthdate,\n            email: this.state.email,\n        };\n\n        axios.post(uri + '/users/update/'+this.props.location.state.user_id, obj, config)\n            .then(res => this.setState( {\n                success: true\n                })\n                //console.log(res.data)\n            );\n\n        this.props.history.push('/all');\n    }\n\n    render() {\n        if( this.state.error ){\n\n            return (\n                <E403 />\n\n            );\n        }\n        else {\n            return (\n                <div>\n                    <Nav/>\n                    <h3 align=\"center\">Update my profile</h3>\n                    <form onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                            <label>Name: </label>\n                            <input type=\"text\"\n                                   className=\"form-control\"\n                                   value={this.state.name}\n                                   onChange={this.onChangeUserName}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Lastname: </label>\n                            <input\n                                type=\"text\"\n                                className=\"form-control\"\n                                value={this.state.lastname}\n                                onChange={this.onChangeUserLastname}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label>Birthdate: </label>\n                            <input\n                                type=\"date\"\n                                className=\"form-control\"\n                                value={this.state.birthdate}\n                                onChange={this.onchangeUserBirthdate}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input\n                                type=\"email\"\n                                disabled=\"disabled\"\n                                className=\"form-control\"\n                                value={this.state.email}\n                                //onChange={this.onchangeUserEmail}\n                            />\n                        </div>\n\n                        <br/>\n\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Update\" className=\"btn btn-primary\"/>\n                        </div>\n                    </form>\n                </div>\n            )\n        }\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import axios from\"axios\";import{Redirect}from\"react-router\";import Nav from\"./Navbar/nav\";import\"../200.css\";var config=require(\"../env\").config;var uri=require(\"../env\").api_uri;var verifyToken=/*#__PURE__*/function(_Component){_inherits(verifyToken,_Component);var _super=_createSuper(verifyToken);function verifyToken(props){var _this;_classCallCheck(this,verifyToken);_this=_super.call(this,props);_this.state={error:'',success:'',redirect:false};return _this;}_createClass(verifyToken,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(uri+'/users/token/'+this.props.match.params.token,config).then(function(res){var obj={validated_email:true};axios.post(uri+'/users/update_activ/'+res.data._id,obj,config).then(function(res){_this2.setState({success:\"Your account have been activated.\"});setTimeout(function(){_this2.setState({redirect:true});},5000);});}).catch(function(error){_this2.setState({error:\"Token invalid\"});});}},{key:\"render\",value:function render(){console.log(this.state);if(this.state.error!==\"\"){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"alert-danger\",children:this.state.error})});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-container\",children:/*#__PURE__*/_jsx(\"i\",{className:\"checkmark\",children:\"\\u2713\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"title-success\",children:\"Success\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-success-act\",children:[this.state.success,/*#__PURE__*/_jsx(\"br\",{}),\" we'll be in touch shortly!\"]}),this.state.redirect&&/*#__PURE__*/_jsx(Redirect,{to:\"/\"})]})]});}}}]);return verifyToken;}(Component);export{verifyToken as default};","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/VerifyToken.js"],"names":["React","Component","axios","Redirect","Nav","config","require","uri","api_uri","verifyToken","props","state","error","success","redirect","get","match","params","token","then","res","obj","validated_email","post","data","_id","setState","setTimeout","catch","console","log"],"mappings":"wxBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,cAAvB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CAEA,MAAO,YAAP,CAEA,GAAMC,CAAAA,MAAM,CAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,MAAjC,CACA,GAAME,CAAAA,GAAG,CAAGD,OAAO,CAAC,QAAD,CAAP,CAAkBE,OAA9B,C,GAGqBC,CAAAA,W,0GAEjB,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CACTC,KAAK,CAAE,EADE,CAETC,OAAO,CAAE,EAFA,CAGTC,QAAQ,CAAE,KAHD,CAAb,CAHe,aAQlB,C,qFAEkB,iBACfZ,KAAK,CAACa,GAAN,CAAWR,GAAG,CAAG,eAAN,CAAwB,KAAKG,KAAL,CAAWM,KAAX,CAAiBC,MAAjB,CAAwBC,KAA3D,CAAmEb,MAAnE,EACKc,IADL,CACU,SAACC,GAAD,CAAS,CACX,GAAMC,CAAAA,GAAG,CAAG,CACRC,eAAe,CAAE,IADT,CAAZ,CAGApB,KAAK,CAACqB,IAAN,CAAWhB,GAAG,CAAG,sBAAN,CAA8Ba,GAAG,CAACI,IAAJ,CAASC,GAAlD,CAAuDJ,GAAvD,CAA4DhB,MAA5D,EACKc,IADL,CAEQ,SAAAC,GAAG,CAAI,CACH,MAAI,CAACM,QAAL,CAAe,CAAEb,OAAO,CAAE,mCAAX,CAAf,EACAc,UAAU,CAAC,UAAM,CACb,MAAI,CAACD,QAAL,CAAc,CAAEZ,QAAQ,CAAE,IAAZ,CAAd,EACH,CAFS,CAEP,IAFO,CAAV,CAGH,CAPT,EAWH,CAhBL,EAgBOc,KAhBP,CAgBa,SAAChB,KAAD,CAAW,CACpB,MAAI,CAACc,QAAL,CAAe,CAAEd,KAAK,CAAE,eAAT,CAAf,EACH,CAlBD,EAmBH,C,uCACQ,CAELiB,OAAO,CAACC,GAAR,CAAa,KAAKnB,KAAlB,EACA,GAAI,KAAKA,KAAL,CAAWC,KAAX,GAAqB,EAAzB,CAA6B,CACzB,mBACI,kCACI,UAAG,SAAS,CAAC,cAAb,UAA6B,KAAKD,KAAL,CAAWC,KAAxC,EADJ,EADJ,CAKH,CAND,IAOI,CACA,mBACI,oCACI,KAAC,GAAD,IADJ,cAGI,aAAK,SAAS,CAAC,MAAf,wBACI,YAAK,SAAS,CAAC,eAAf,uBACI,UAAG,SAAS,CAAC,WAAb,oBADJ,EADJ,cAII,WAAI,SAAS,CAAC,eAAd,qBAJJ,cAKI,WAAG,SAAS,CAAC,kBAAb,WAAiC,KAAKD,KAAL,CAAWE,OAA5C,cAAoD,aAApD,iCALJ,CAOK,KAAKF,KAAL,CAAWG,QAAX,eAEG,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EATR,GAHJ,GADJ,CAsBH,CAEJ,C,yBApEoCb,S,SAApBQ,W","sourcesContent":["import React, {Component} from \"react\";\nimport axios from \"axios\";\nimport {Redirect} from \"react-router\";\nimport Nav from \"./Navbar/nav\";\n\nimport \"../200.css\";\n\nconst config = require(\"../env\").config;\nconst uri = require(\"../env\").api_uri;\n\n\nexport default class verifyToken extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            error: '',\n            success: '',\n            redirect: false,\n        }\n    }\n\n    componentDidMount(){\n        axios.get( uri + '/users/token/' + this.props.match.params.token , config )\n            .then((res) => {\n                const obj = {\n                    validated_email: true,\n                };\n                axios.post(uri + '/users/update_activ/'+ res.data._id, obj, config)\n                    .then(\n                        res => {\n                            this.setState( { success: \"Your account have been activated.\"})\n                            setTimeout(() => {\n                                this.setState({ redirect: true });\n                            }, 5000);\n                        }\n\n                    );\n\n            }).catch((error) => {\n            this.setState( { error: \"Token invalid\"})\n        })\n    }\n    render() {\n\n        console.log( this.state)\n        if( this.state.error !== \"\" ){\n            return (\n                <div>\n                    <p className=\"alert-danger\">{this.state.error}</p>\n                </div>\n            )\n        }\n        else{\n            return (\n                <div>\n                    <Nav />\n\n                    <div className=\"card\">\n                        <div className=\"div-container\">\n                            <i className=\"checkmark\">âœ“</i>\n                        </div>\n                        <h1 className=\"title-success\">Success</h1>\n                        <p className=\"text-success-act\">{this.state.success}<br/> we'll be in touch shortly!</p>\n\n                        {this.state.redirect && (\n\n                            <Redirect to=\"/\" />\n                        )\n                        }\n\n                    </div>\n\n                </div>\n\n            );\n        }\n\n    }\n}"]},"metadata":{},"sourceType":"module"}
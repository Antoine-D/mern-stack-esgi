{"ast":null,"code":"import _regeneratorRuntime from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import axios from\"axios\";import{Redirect}from'react-router';import'../App.css';import Nav from\"./Navbar/nav\";var uri=require(\"../env\").api_uri;var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleInputChange=function(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;_this.setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{data:_objectSpread(_objectSpread({},prev.data),{},_defineProperty({},name,value))});});};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(uri+'/users/login',_this.state.data);case 4:response=_context.sent;localStorage.setItem('token',JSON.stringify(response.data.token));_this.setState({redirect:true});//await RedirectAfterLogin();\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);_this.setState({error:_context.t0.response.data});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={data:{email:'',password:''},redirect:false,error:null};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var redirect=this.state.redirect;if(redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/all\"});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",value:this.state.data.email,onChange:this.handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",value:this.state.data.password,onChange:this.handleInputChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:this.state.error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger error-message\",role:\"alert\",children:this.state.error.message})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-primary\"})})]})]});}}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/Login.js"],"names":["React","Component","axios","Redirect","Nav","uri","require","api_uri","Login","props","handleInputChange","target","name","value","setState","prev","data","handleSubmit","e","preventDefault","post","state","response","localStorage","setItem","JSON","stringify","token","redirect","error","email","password","message"],"mappings":"s+CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,QAAT,KAAyB,cAAzB,CAEA,MAAO,YAAP,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CAEA,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBC,OAA9B,C,GAEqBC,CAAAA,K,8FAEjB,eAAYC,KAAZ,CAAmB,uCACf,uBAAMA,KAAN,EADe,MAanBC,iBAbmB,CAaC,cAAiC,sBAA9BC,MAA8B,CAApBC,IAAoB,aAApBA,IAAoB,CAAdC,KAAc,aAAdA,KAAc,CACjD,MAAKC,QAAL,CAAc,SAAAC,IAAI,wCACXA,IADW,MAEdC,IAAI,gCACGD,IAAI,CAACC,IADR,wBAECJ,IAFD,CAEQC,KAFR,EAFU,IAAlB,EAOH,CArBkB,OAuBnBI,YAvBmB,2FAuBJ,iBAAMC,CAAN,+HACXA,CAAC,CAACC,cAAF,GADW,sCAIgBjB,CAAAA,KAAK,CAACkB,IAAN,CAAWf,GAAG,CAAG,cAAjB,CAAiC,MAAKgB,KAAL,CAAWL,IAA5C,CAJhB,QAIDM,QAJC,eAMPC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAgBJ,QAAQ,CAACN,IAAT,CAAcW,KAA9B,CAA9B,EAEA,MAAKb,QAAL,CAAc,CAAEc,QAAQ,CAAE,IAAZ,CAAd,EACA;AATO,+EAWP,MAAKd,QAAL,CAAe,CAACe,KAAK,CAAE,YAAMP,QAAN,CAAeN,IAAvB,CAAf,EAXO,oEAvBI,gEAGf,MAAKK,KAAL,CAAa,CACTL,IAAI,CAAC,CACDc,KAAK,CAAE,EADN,CAEDC,QAAQ,CAAE,EAFT,CADI,CAKTH,QAAQ,CAAE,KALD,CAMTC,KAAK,CAAE,IANE,CAAb,CAHe,aAWlB,C,yDA4BQ,IACGD,CAAAA,QADH,CACgB,KAAKP,KADrB,CACGO,QADH,CAEL,GAAIA,QAAJ,CAAc,CACV,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,MAAb,EAAP,CACH,CAFD,IAGI,CACA,mBACI,oCACI,KAAC,GAAD,IADJ,cAEI,6BAFJ,cAGI,cAAM,QAAQ,CAAE,KAAKX,YAArB,wBACI,aAAK,SAAS,CAAC,YAAf,wBACI,kCADJ,cAEI,cACI,IAAI,CAAC,OADT,CAEI,IAAI,CAAC,OAFT,CAGI,SAAS,CAAC,cAHd,CAII,KAAK,CAAE,KAAKI,KAAL,CAAWL,IAAX,CAAgBc,KAJ3B,CAKI,QAAQ,CAAE,KAAKpB,iBALnB,EAFJ,GADJ,cAYI,aAAK,SAAS,CAAC,YAAf,wBACI,qCADJ,cAEI,cACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,UAFT,CAGI,SAAS,CAAC,cAHd,CAII,KAAK,CAAE,KAAKW,KAAL,CAAWL,IAAX,CAAgBe,QAJ3B,CAKI,QAAQ,CAAE,KAAKrB,iBALnB,EAFJ,GAZJ,cAuBI,YAAK,SAAS,CAAC,YAAf,UACM,KAAKW,KAAL,CAAWQ,KAAX,eACF,YAAK,SAAS,CAAC,kCAAf,CAAkD,IAAI,CAAC,OAAvD,UACM,KAAKR,KAAL,CAAWQ,KAAX,CAAiBG,OADvB,EAFJ,EAvBJ,cA8BI,YAAK,SAAS,CAAC,YAAf,uBACI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,OAA3B,CAAmC,SAAS,CAAC,iBAA7C,EADJ,EA9BJ,GAHJ,GADJ,CAwCH,CAEJ,C,mBAzF8B/B,S,SAAdO,K","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\";\n\nimport { Redirect } from 'react-router';\n\nimport '../App.css';\nimport Nav from \"./Navbar/nav\";\n\nconst uri = require(\"../env\").api_uri;\n\nexport default class Login extends Component{\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            data:{\n                email: '',\n                password: ''\n            },\n            redirect: false,\n            error: null\n        }\n    }\n\n    handleInputChange = ({ target: { name, value } }) => {\n        this.setState(prev => ({\n            ...prev,\n            data: {\n                ...prev.data,\n                [name]: value,\n            },\n        }));\n    };\n\n    handleSubmit = async e => {\n        e.preventDefault();\n\n        try{\n            const response = await axios.post(uri + '/users/login', this.state.data)\n\n            localStorage.setItem('token', JSON.stringify( response.data.token ) );\n\n            this.setState({ redirect: true });\n            //await RedirectAfterLogin();\n        }catch ( error ){\n            this.setState( {error: error.response.data } );\n        }\n    }\n\n\n    render() {\n        const { redirect } = this.state;\n        if (redirect) {\n            return <Redirect to=\"/all\" />;\n        }\n        else{\n            return (\n                <div>\n                    <Nav />\n                    <h3>Login</h3>\n                    <form onSubmit={this.handleSubmit}>\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input\n                                type=\"email\"\n                                name=\"email\"\n                                className=\"form-control\"\n                                value={this.state.data.email}\n                                onChange={this.handleInputChange}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label>Password: </label>\n                            <input\n                                type=\"password\"\n                                name=\"password\"\n                                className=\"form-control\"\n                                value={this.state.data.password}\n                                onChange={this.handleInputChange}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            { this.state.error &&\n                            <div className=\"alert alert-danger error-message\" role=\"alert\">\n                                { this.state.error.message }\n                            </div>\n                            }\n                        </div>\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\" />\n                        </div>\n                    </form>\n                </div>\n            );\n        }\n\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}
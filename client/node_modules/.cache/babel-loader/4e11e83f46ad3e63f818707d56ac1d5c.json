{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/Login.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport { Redirect } from 'react-router';\nimport '../App.css';\nimport Nav from \"./Navbar/nav\";\n\nconst uri = require(\"../env\").api_uri;\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputChange = ({\n      target: {\n        name,\n        value\n      }\n    }) => {\n      this.setState(prev => ({ ...prev,\n        data: { ...prev.data,\n          [name]: value\n        }\n      }));\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n\n      try {\n        const response = await axios.post(uri + '/users/login', this.state.data);\n        localStorage.setItem('token', JSON.stringify(response.data.token));\n        this.setState({\n          redirect: true\n        }); //await RedirectAfterLogin();\n      } catch (error) {\n        this.setState({\n          error: error.response.data\n        });\n      }\n    };\n\n    this.state = {\n      data: {\n        email: '',\n        password: ''\n      },\n      redirect: false,\n      error: null\n    };\n  }\n\n  render() {\n    const {\n      redirect\n    } = this.state;\n\n    if (redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/all\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              name: \"email\",\n              className: \"form-control\",\n              value: this.state.data.email,\n              onChange: this.handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Password: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              className: \"form-control\",\n              value: this.state.data.password,\n              onChange: this.handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: this.state.error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-danger error-message\",\n              role: \"alert\",\n              children: this.state.error.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Login\",\n              className: \"btn btn-primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/Login.js"],"names":["React","Component","axios","Redirect","Nav","uri","require","api_uri","Login","constructor","props","handleInputChange","target","name","value","setState","prev","data","handleSubmit","e","preventDefault","response","post","state","localStorage","setItem","JSON","stringify","token","redirect","error","email","password","render","message"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\";\n\nimport { Redirect } from 'react-router';\n\nimport '../App.css';\nimport Nav from \"./Navbar/nav\";\n\nconst uri = require(\"../env\").api_uri;\n\nexport default class Login extends Component{\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            data:{\n                email: '',\n                password: ''\n            },\n            redirect: false,\n            error: null\n        }\n    }\n\n    handleInputChange = ({ target: { name, value } }) => {\n        this.setState(prev => ({\n            ...prev,\n            data: {\n                ...prev.data,\n                [name]: value,\n            },\n        }));\n    };\n\n    handleSubmit = async e => {\n        e.preventDefault();\n\n        try{\n            const response = await axios.post(uri + '/users/login', this.state.data)\n\n            localStorage.setItem('token', JSON.stringify( response.data.token ) );\n\n            this.setState({ redirect: true });\n            //await RedirectAfterLogin();\n        }catch ( error ){\n            this.setState( {error: error.response.data } );\n        }\n    }\n\n\n    render() {\n        const { redirect } = this.state;\n        if (redirect) {\n            return <Redirect to=\"/all\" />;\n        }\n        else{\n            return (\n                <div>\n                    <Nav />\n                    <h3>Login</h3>\n                    <form onSubmit={this.handleSubmit}>\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input\n                                type=\"email\"\n                                name=\"email\"\n                                className=\"form-control\"\n                                value={this.state.data.email}\n                                onChange={this.handleInputChange}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label>Password: </label>\n                            <input\n                                type=\"password\"\n                                name=\"password\"\n                                className=\"form-control\"\n                                value={this.state.data.password}\n                                onChange={this.handleInputChange}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            { this.state.error &&\n                            <div className=\"alert alert-danger error-message\" role=\"alert\">\n                                { this.state.error.message }\n                            </div>\n                            }\n                        </div>\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\" />\n                        </div>\n                    </form>\n                </div>\n            );\n        }\n\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import E403 from\"./errors/E403\";import Nav from\"./Navbar/nav\";var config=require(\"../env\").config;var uri=require(\"../env\").api_uri;var User=function User(props){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:props.user.name}),/*#__PURE__*/_jsx(\"td\",{children:props.user.lastname}),/*#__PURE__*/_jsx(\"td\",{children:props.user.birthdate}),/*#__PURE__*/_jsx(\"td\",{children:props.user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-warning\",to:\"/edit/\"+props.user._id,children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-danger\",to:\"/delete/\"+props.user._id,children:\"Delete\"})})]});};var GetUser=/*#__PURE__*/function(_Component){_inherits(GetUser,_Component);var _super=_createSuper(GetUser);function GetUser(props){var _this;_classCallCheck(this,GetUser);_this=_super.call(this,props);_this.state={users:[],error:''};return _this;}_createClass(GetUser,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var user=JSON.parse(localStorage.getItem('token'));var config={headers:{Authorization:\"Bearer \".concat(user!==null?user.token:null)}};axios.get(uri+'/users',config).then(function(response){_this2.setState({users:response.data});_this2.setState({error:''});}).catch(function(error){_this2.setState({error:error.message});});}},{key:\"userList\",value:function userList(){return this.state.users.map(function(currentUser,i){return/*#__PURE__*/_jsx(User,{user:currentUser},i);});}},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsx(E403,{});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Users List\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",style:{marginTop:20},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lastame\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Birthdate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.userList()})]})]});}}}]);return GetUser;}(Component);export{GetUser as default};","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/GetUser.js"],"names":["React","Component","Link","axios","E403","Nav","config","require","uri","api_uri","User","props","user","name","lastname","birthdate","email","_id","GetUser","state","users","error","JSON","parse","localStorage","getItem","headers","Authorization","token","get","then","response","setState","data","catch","message","map","currentUser","i","marginTop","userList"],"mappings":"wxBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CAEA,GAAMC,CAAAA,MAAM,CAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,MAAjC,CACA,GAAME,CAAAA,GAAG,CAAGD,OAAO,CAAC,QAAD,CAAP,CAAkBE,OAA9B,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAC,KAAK,qBACd,mCACI,oBAAKA,KAAK,CAACC,IAAN,CAAWC,IAAhB,EADJ,cAEI,oBAAKF,KAAK,CAACC,IAAN,CAAWE,QAAhB,EAFJ,cAGI,oBAAKH,KAAK,CAACC,IAAN,CAAWG,SAAhB,EAHJ,cAII,oBAAKJ,KAAK,CAACC,IAAN,CAAWI,KAAhB,EAJJ,cAKI,iCACI,KAAC,IAAD,EAAM,SAAS,CAAC,iBAAhB,CAAkC,EAAE,CAAE,SAASL,KAAK,CAACC,IAAN,CAAWK,GAA1D,kBADJ,EALJ,cAQI,iCACI,KAAC,IAAD,EAAM,SAAS,CAAC,gBAAhB,CAAiC,EAAE,CAAE,WAAWN,KAAK,CAACC,IAAN,CAAWK,GAA3D,oBADJ,EARJ,GADc,EAAlB,C,GAcqBC,CAAAA,O,kGAEjB,iBAAYP,KAAZ,CAAmB,yCACf,uBAAMA,KAAN,EACA,MAAKQ,KAAL,CAAa,CAACC,KAAK,CAAE,EAAR,CAAYC,KAAK,CAAE,EAAnB,CAAb,CAFe,aAGlB,C,iFAEoB,iBAEhB,GAAMT,CAAAA,IAAI,CAAGU,IAAI,CAACC,KAAL,CAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CAAb,CACA,GAAInB,CAAAA,MAAM,CAAG,CACToB,OAAO,CAAE,CAAEC,aAAa,kBAAaf,IAAI,GAAK,IAAT,CAAgBA,IAAI,CAACgB,KAArB,CAA6B,IAA1C,CAAf,CADA,CAAb,CAIAzB,KAAK,CAAC0B,GAAN,CAAWrB,GAAG,CAAG,QAAjB,CAA2BF,MAA3B,EACKwB,IADL,CACU,SAAAC,QAAQ,CAAI,CACf,MAAI,CAACC,QAAL,CAAc,CAAEZ,KAAK,CAAEW,QAAQ,CAACE,IAAlB,CAAd,EACA,MAAI,CAACD,QAAL,CAAe,CAAEX,KAAK,CAAE,EAAT,CAAf,EACH,CAJJ,EAKIa,KALJ,CAKW,SAAAb,KAAK,CAAI,CACb,MAAI,CAACW,QAAL,CAAc,CAAEX,KAAK,CAAEA,KAAK,CAACc,OAAf,CAAd,EACH,CAPJ,EAQJ,C,2CAEU,CACH,MAAO,MAAKhB,KAAL,CAAWC,KAAX,CAAiBgB,GAAjB,CAAqB,SAASC,WAAT,CAAsBC,CAAtB,CAAwB,CAChD,mBAAO,KAAC,IAAD,EAAM,IAAI,CAAED,WAAZ,EAA8BC,CAA9B,CAAP,CACH,CAFM,CAAP,CAIP,C,uCAEQ,CAEL,GAAI,KAAKnB,KAAL,CAAWE,KAAf,CAAsB,CAElB,mBACQ,KAAC,IAAD,IADR,CAIH,CAND,IAOI,CACA,mBACI,oCACI,KAAC,GAAD,IADJ,cAEI,kCAFJ,cAGI,eAAO,SAAS,CAAC,qBAAjB,CAAuC,KAAK,CAAE,CAAEkB,SAAS,CAAE,EAAb,CAA9C,wBACI,oCACA,mCACI,4BADJ,cAEI,+BAFJ,cAGI,iCAHJ,cAII,6BAJJ,GADA,EADJ,cASI,uBACE,KAAKC,QAAL,EADF,EATJ,GAHJ,GADJ,CAmBH,CAEJ,C,qBA9DgCvC,S,SAAhBiB,O","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport E403 from \"./errors/E403\";\nimport Nav from \"./Navbar/nav\"\n\nconst config = require(\"../env\").config;\nconst uri = require(\"../env\").api_uri;\n\nconst User = props => (\n    <tr>\n        <td>{props.user.name}</td>\n        <td>{props.user.lastname}</td>\n        <td>{props.user.birthdate}</td>\n        <td>{props.user.email}</td>\n        <td>\n            <Link className=\"btn btn-warning\" to={\"/edit/\"+props.user._id}>Edit</Link>\n        </td>\n        <td>\n            <Link className=\"btn btn-danger\" to={\"/delete/\"+props.user._id}>Delete</Link>\n        </td>\n    </tr>\n)\nexport default class GetUser extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {users: [], error: '' };\n    }\n\n     componentDidMount() {\n\n         const user = JSON.parse( localStorage.getItem('token') );\n         let config = {\n             headers: { Authorization: `Bearer ${ user !== null ? user.token : null }` }\n         }\n\n         axios.get( uri + '/users', config)\n             .then(response => {\n                this.setState({ users: response.data });\n                this.setState( { error: '' } );\n            })\n            .catch( error => {\n                this.setState({ error: error.message });\n            })\n    }\n\n    userList() {\n            return this.state.users.map(function(currentUser, i){\n                return <User user={currentUser} key={i} />;\n            })\n\n    }\n\n    render() {\n\n        if( this.state.error ){\n\n            return (\n                    <E403 />\n\n        );\n        }\n        else{\n            return (\n                <div>\n                    <Nav />\n                    <h3>Users List</h3>\n                    <table className=\"table table-striped\" style={{ marginTop: 20 }} >\n                        <thead>\n                        <tr>\n                            <th>Name</th>\n                            <th>Lastame</th>\n                            <th>Birthdate</th>\n                            <th>Email</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        { this.userList() }\n                        </tbody>\n                    </table>\n                </div>\n            );\n        }\n\n    }\n}"]},"metadata":{},"sourceType":"module"}
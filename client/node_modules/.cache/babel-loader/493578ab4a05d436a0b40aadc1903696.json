{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/CreateUser.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Formik } from \"formik\";\nimport * as hash from \"password-hash\"; // Used to Hash password\n\nimport * as EmailValidator from \"email-validator\";\nimport Nav from \"./Navbar/nav\"; // used when validating with a self-implemented approach\n\nconst uri = require(\"../env\").api_uri;\n\nconst Subscribe = () => /*#__PURE__*/_jsxDEV(Formik, {\n  initialValues: {\n    email: \"\",\n    password: \"\",\n    password_conf: \"\",\n    name: \"\",\n    lastname: \"\",\n    birthdate: \"\",\n    validated_email: false\n  },\n  validate: async values => {\n    let errors = {};\n\n    if (!values.email) {\n      errors.email = \"Required\";\n    } else if (!EmailValidator.validate(values.email)) {\n      errors.email = \"Invalid email address.\";\n    }\n\n    const passwordRegex = /(?=.*[0-9])/;\n\n    if (!values.password) {\n      errors.password = \"Required\";\n    } else if (values.password.length < 8) {\n      errors.password = \"Password must be 8 characters long.\";\n    } else if (!passwordRegex.test(values.password)) {\n      errors.password = \"Invalid password. Must contain one number.\";\n    }\n\n    if (!values.password_conf) {\n      errors.password_conf = \"Required\";\n    } else if (values.password !== values.password_conf) {\n      errors.password_conf = \"Passwords doesn't match\";\n    }\n\n    if (!values.name) {\n      errors.name = \"Required\";\n    }\n\n    if (!values.lastname) {\n      errors.lastname = \"Required\";\n    }\n\n    if (!values.birthdate) {\n      errors.birthdate = \"Required\";\n    }\n\n    await axios.get(uri + '/users/email/' + values.email).then(response => {\n      //console.log( response)\n      if (response.data !== null) {\n        errors.email = \"This email is already used\";\n      }\n    }).catch(function (error) {});\n    return errors;\n  },\n  onSubmit: (values, {\n    resetForm,\n    setErrors,\n    setStatus\n  }) => {\n    values.validated_email = false;\n    values.password = hash.generate(values.password);\n\n    try {\n      axios.post(uri + '/users/new', values);\n      resetForm({});\n      setStatus({\n        success: \"An email has been sent to confirm your account.\"\n      });\n      this.props.history.push('/');\n    } catch (error) {\n      //setStatus({success: false})\n      setErrors({\n        submit: error.message\n      });\n    }\n  },\n  children: props => {\n    const {\n      values,\n      touched,\n      errors,\n      status,\n      handleChange,\n      handleBlur,\n      handleSubmit\n    } = props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Name: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control \" + (errors.name && touched.name && \" error\"),\n            name: \"name\",\n            placeholder: \"Enter your name\",\n            value: values.name,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this), errors.name && touched.name && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback\",\n            children: errors.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Lastname: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"lastname\",\n            className: \"form-control \" + (errors.lastname && touched.lastname && \" error\"),\n            placeholder: \"Enter your lastname\",\n            value: values.lastname,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this), errors.lastname && touched.lastname && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback\",\n            children: errors.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Birth Date: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"birthdate\",\n            className: \"form-control \" + (errors.birthdate && touched.birthdate && \" error\"),\n            value: values.birthdate,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 29\n          }, this), errors.birthdate && touched.birthdate && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback\",\n            children: errors.birthdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Enter your email\",\n            className: \"form-control \" + (errors.email && touched.email && \" error\"),\n            value: values.email,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 29\n          }, this), errors.email && touched.email && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback\",\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"Enter your password\",\n            className: \"form-control \" + (errors.password && touched.password && \" error\"),\n            value: values.password,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 29\n          }, this), errors.password && touched.password && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password Confirmation: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password_conf\",\n            placeholder: \"Confirm your password\",\n            className: \"form-control \" + (errors.password_conf && touched.password_conf && \" error\"),\n            value: values.password_conf,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 29\n          }, this), errors.password_conf && touched.password_conf && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-feedback\",\n            children: errors.password_conf\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Register\",\n            className: \"btn btn-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }, this), status !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert-success\",\n          children: status.success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this);\n  }\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 5\n}, this);\n\n_c = Subscribe;\nexport default Subscribe;\n\nvar _c;\n\n$RefreshReg$(_c, \"Subscribe\");","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/CreateUser.js"],"names":["React","Component","axios","Formik","hash","EmailValidator","Nav","uri","require","api_uri","Subscribe","email","password","password_conf","name","lastname","birthdate","validated_email","values","errors","validate","passwordRegex","length","test","get","then","response","data","catch","error","resetForm","setErrors","setStatus","generate","post","success","props","history","push","submit","message","touched","status","handleChange","handleBlur","handleSubmit","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\nimport { Formik } from \"formik\";\nimport * as hash from \"password-hash\"; // Used to Hash password\nimport * as EmailValidator from \"email-validator\";\nimport Nav from \"./Navbar/nav\"; // used when validating with a self-implemented approach\n\nconst uri = require(\"../env\").api_uri;\nconst Subscribe = () => (\n    <Formik\n        initialValues={{ email: \"\", password: \"\" , password_conf: \"\", name: \"\", lastname: \"\", birthdate: \"\", validated_email: false}}\n        validate={ async values => {\n            let errors = {};\n            if (!values.email) {\n                errors.email = \"Required\";\n            } else if (!EmailValidator.validate(values.email)) {\n                errors.email = \"Invalid email address.\";\n            }\n            const passwordRegex = /(?=.*[0-9])/;\n            if (!values.password) {\n                errors.password = \"Required\";\n            } else if (values.password.length < 8) {\n                errors.password = \"Password must be 8 characters long.\";\n            } else if (!passwordRegex.test(values.password)) {\n                errors.password = \"Invalid password. Must contain one number.\";\n            }\n            if (!values.password_conf) {\n                errors.password_conf = \"Required\";\n            } else if( values.password !== values.password_conf){\n                errors.password_conf = \"Passwords doesn't match\";\n            }\n            if (!values.name) {\n                errors.name = \"Required\";\n            }\n            if (!values.lastname) {\n                errors.lastname = \"Required\";\n            }\n            if (!values.birthdate) {\n                errors.birthdate = \"Required\";\n            }\n\n            await axios.get(uri + '/users/email/'+values.email)\n                .then(response => {\n                    //console.log( response)\n                    if( response.data !== null ){\n                        errors.email = \"This email is already used\";\n                    }\n                })\n                .catch(function (error){\n                })\n            return errors;\n        }}\n        onSubmit={(values, { resetForm, setErrors, setStatus }) => {\n\n            values.validated_email = false\n            values.password = hash.generate(values.password);\n\n            try{\n                axios.post(uri + '/users/new', values)\n                resetForm({})\n                setStatus({success: \"An email has been sent to confirm your account.\"})\n                this.props.history.push('/');\n            }catch ( error ){\n                //setStatus({success: false})\n                setErrors({submit: error.message})\n            }\n        }}\n    >\n        {props => {\n            const {\n                values,\n                touched,\n                errors,\n                status,\n                handleChange,\n                handleBlur,\n                handleSubmit\n            } = props;\n\n            return (\n\n                <div>\n                    <Nav />\n                    <h3>Register</h3>\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"form-group\">\n                            <label>Name: </label>\n                            <input  type=\"text\"\n                                    className={ \"form-control \" + ( errors.name && touched.name && \" error\" )}\n                                    name=\"name\"\n                                    placeholder=\"Enter your name\"\n                                    value={values.name}\n                                    onChange={handleChange}\n                                    onBlur={handleBlur}\n                            />\n                            {errors.name && touched.name && (\n                                <div className=\"input-feedback\">{errors.name}</div>\n                            )}\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Lastname: </label>\n                            <input\n                                type=\"text\"\n                                name=\"lastname\"\n                                className={ \"form-control \" + ( errors.lastname && touched.lastname && \" error\" )}\n                                placeholder=\"Enter your lastname\"\n                                value={values.lastname}\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                            />\n                            {errors.lastname && touched.lastname && (\n                                <div className=\"input-feedback\">{errors.lastname}</div>\n                            )}\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Birth Date: </label>\n                            <input\n                                type=\"date\"\n                                name=\"birthdate\"\n                                className={ \"form-control \" + ( errors.birthdate && touched.birthdate && \" error\" )}\n                                value={values.birthdate}\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                            />\n                            {errors.birthdate && touched.birthdate && (\n                                <div className=\"input-feedback\">{errors.birthdate}</div>\n                            )}\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input\n                                type=\"email\"\n                                name=\"email\"\n                                placeholder=\"Enter your email\"\n                                className={ \"form-control \" + ( errors.email && touched.email && \" error\" )}\n                                value={values.email}\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                            />\n                            {errors.email && touched.email && (\n                                <div className=\"input-feedback\">{errors.email}</div>\n                            )}\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Password: </label>\n                            <input\n                                type=\"password\"\n                                name=\"password\"\n                                placeholder=\"Enter your password\"\n                                className={ \"form-control \" + ( errors.password && touched.password && \" error\" )}\n                                value={values.password}\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                            />\n                            {errors.password && touched.password && (\n                                <div className=\"input-feedback\">{errors.password}</div>\n                            )}\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Password Confirmation: </label>\n                            <input\n                                type=\"password\"\n                                name=\"password_conf\"\n                                placeholder=\"Confirm your password\"\n                                className={ \"form-control \" + ( errors.password_conf && touched.password_conf && \" error\" )}\n                                value={values.password_conf}\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                            />\n                            {errors.password_conf && touched.password_conf && (\n                                <div className=\"input-feedback\">{errors.password_conf}</div>\n                            )}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Register\" className=\"btn btn-primary\" />\n                        </div>\n                        {status !== undefined && (\n                            <div className=\"alert-success\">{status.success}</div>\n                        )}\n                    </form>\n                </div>\n            );\n        }}\n    </Formik>\n);\n\n\nexport default Subscribe;"]},"metadata":{},"sourceType":"module"}
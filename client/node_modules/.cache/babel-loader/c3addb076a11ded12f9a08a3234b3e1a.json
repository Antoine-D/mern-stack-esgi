{"ast":null,"code":"import _classCallCheck from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/antoinedumont/Documents/project_ratt/mern-stack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import axios from'axios';import Nav from\"./Navbar/nav\";import E403 from\"./errors/E403\";var config=require(\"../env\").config;var uri=require(\"../env\").api_uri;var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.onChangeUserName=_this.onChangeUserName.bind(_assertThisInitialized(_this));_this.onChangeUserLastname=_this.onChangeUserLastname.bind(_assertThisInitialized(_this));_this.onchangeUserBirthdate=_this.onchangeUserBirthdate.bind(_assertThisInitialized(_this));//this.onchangeUserEmail = this.onchangeUserEmail.bind(this);\n_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.state={name:'',lastname:'',birthdate:'',email:'',validated_email:'',success:false,error:''};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.location.state){axios.get(uri+'/users/'+this.props.location.state.user_id,config).then(function(response){_this2.setState({name:response.data.name,lastname:response.data.lastname,birthdate:response.data.birthdate,email:response.data.email,validated_email:response.data.validated_email});_this2.setState({error:''});}).catch(function(error){this.setState({error:error.message});});}else{this.setState({error:\"Unauthorized\"});}}},{key:\"onChangeUserName\",value:function onChangeUserName(e){this.setState({name:e.target.value});}},{key:\"onChangeUserLastname\",value:function onChangeUserLastname(e){this.setState({lastname:e.target.value});}},{key:\"onchangeUserBirthdate\",value:function onchangeUserBirthdate(e){this.setState({birthdate:e.target.value});}},{key:\"onSubmit\",value:function onSubmit(e){var _this3=this;e.preventDefault();var obj={name:this.state.name,lastname:this.state.lastname,birthdate:this.state.birthdate,email:this.state.email,validated_email:this.state.validated_email};axios.post(uri+'/users/update/'+this.props.location.state.user_id,obj,config).then(function(res){return _this3.setState({success:true});}//console.log(res.data)\n);this.props.history.push('/all');}},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsx(E403,{});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"h3\",{align:\"center\",children:\"Update my profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.name,onChange:this.onChangeUserName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lastname: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.lastname,onChange:this.onChangeUserLastname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Birthdate: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",value:this.state.birthdate,onChange:this.onchangeUserBirthdate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",disabled:\"disabled\",className:\"form-control\",value:this.state.email//onChange={this.onchangeUserEmail}\n})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",className:\"btn btn-primary\"})})]})]});}}}]);return Profile;}(Component);export{Profile as default};","map":{"version":3,"sources":["/Users/antoinedumont/Documents/project_ratt/mern-stack/client/src/Components/Profile.js"],"names":["React","Component","axios","Nav","E403","config","require","uri","api_uri","Profile","props","onChangeUserName","bind","onChangeUserLastname","onchangeUserBirthdate","onSubmit","state","name","lastname","birthdate","email","validated_email","success","error","location","get","user_id","then","response","setState","data","catch","message","e","target","value","preventDefault","obj","post","res","history","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Nav from \"./Navbar/nav\";\nimport E403 from \"./errors/E403\";\n\n\nconst config = require(\"../env\").config;\nconst uri = require(\"../env\").api_uri;\n\nexport default class Profile extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.onChangeUserName = this.onChangeUserName.bind(this);\n        this.onChangeUserLastname = this.onChangeUserLastname.bind(this);\n        this.onchangeUserBirthdate = this.onchangeUserBirthdate.bind(this);\n        //this.onchangeUserEmail = this.onchangeUserEmail.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n\n        this.state = {\n            name: '',\n            lastname: '',\n            birthdate: '',\n            email: '',\n            validated_email: '',\n            success: false,\n            error: ''\n        }\n    }\n\n    componentDidMount() {\n        if ( this.props.location.state ){\n            axios.get(uri + '/users/'+this.props.location.state.user_id, config)\n                .then(response => {\n                    this.setState({\n                        name: response.data.name,\n                        lastname: response.data.lastname,\n                        birthdate: response.data.birthdate,\n                        email: response.data.email,\n                        validated_email: response.data.validated_email\n                    })\n                    this.setState( { error: '' } );\n                })\n                .catch(function (error) {\n                    this.setState({ error: error.message });\n                })\n        }\n        else{\n            this.setState({ error: \"Unauthorized\" });\n        }\n\n    }\n\n    onChangeUserName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n    onChangeUserLastname(e) {\n        this.setState({\n            lastname: e.target.value\n        });\n    }\n    onchangeUserBirthdate(e) {\n        this.setState({\n            birthdate: e.target.value\n        });\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        const obj = {\n            name: this.state.name,\n            lastname: this.state.lastname,\n            birthdate: this.state.birthdate,\n            email: this.state.email,\n            validated_email: this.state.validated_email\n        };\n\n        axios.post(uri + '/users/update/'+this.props.location.state.user_id, obj, config)\n            .then(res => this.setState( {\n                success: true\n                })\n                //console.log(res.data)\n            );\n\n        this.props.history.push('/all');\n    }\n\n    render() {\n        if( this.state.error ){\n\n            return (\n                <E403 />\n\n            );\n        }\n        else {\n            return (\n                <div>\n                    <Nav/>\n                    <h3 align=\"center\">Update my profile</h3>\n                    <form onSubmit={this.onSubmit}>\n                        <div className=\"form-group\">\n                            <label>Name: </label>\n                            <input type=\"text\"\n                                   className=\"form-control\"\n                                   value={this.state.name}\n                                   onChange={this.onChangeUserName}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Lastname: </label>\n                            <input\n                                type=\"text\"\n                                className=\"form-control\"\n                                value={this.state.lastname}\n                                onChange={this.onChangeUserLastname}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label>Birthdate: </label>\n                            <input\n                                type=\"date\"\n                                className=\"form-control\"\n                                value={this.state.birthdate}\n                                onChange={this.onchangeUserBirthdate}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input\n                                type=\"email\"\n                                disabled=\"disabled\"\n                                className=\"form-control\"\n                                value={this.state.email}\n                                //onChange={this.onchangeUserEmail}\n                            />\n                        </div>\n\n                        <br/>\n\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Update\" className=\"btn btn-primary\"/>\n                        </div>\n                    </form>\n                </div>\n            )\n        }\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}